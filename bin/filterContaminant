#!/usr/bin/env python

import argparse;
import kaic.correcting.filterContamination as fc



def splitList(thisList):
    return thisList.split(",");

if __name__ == '__main__':
    parser = argparse.ArgumentParser();
    
    parser.add_argument(
        'input',
        help='''SAM file with mapped reads'''
    );
    
    parser.add_argument(
        'contaminant',
        help='''SAM file with reads mapped to contaminant genome'''
    );
    
    parser.add_argument(
        'output',
        help='''Output SAM file'''
    );
    
    parser.add_argument(
        '-m', '--memory', dest='memory',
        action='store_true',
        help='''Perform everything in memory'''
    );
    parser.set_defaults(warnings=False);
    
    args = parser.parse_args()
    
    if args.memory == True:
        fc.filterContamination(args.input,args.contaminant,args.output)
    else:
        fc.filterContaminationLowMem(args.input,args.contaminant,args.output)