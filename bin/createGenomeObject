#!/usr/bin/env python

import argparse
import time
import kaic.genome.genomeTools as gt

def splitList(thisList):
    return thisList.split(",");

if __name__ == '__main__':
    parser = argparse.ArgumentParser();
    
    parser.add_argument(
        'input',
        help='''Genome folder with FASTA files'''
    );
    
    parser.add_argument(
        'output',
        help='''Output file for genome object'''
    );
    

    parser.add_argument(
        '-re', '--restriction-enzyme', dest='restrictionEnzyme',
        default='',
        help='''Restriction enzyme name (e.g. HindIII)''',
        required=True
    );
    
    
    parser.add_argument(
        '-r', '--read-chromosomes', dest='readChrms',
        type=splitList,
        default=["#","X"],
        help='''Comma-separated list of chromosomes to read (options: #=numbered, X, Y, M). Default: #,X'''
    );
    
    
    args = parser.parse_args()
    
    print ">>>>>>>>>>>>>>>>>>>>>>>>>>>>"
    print("Using the following settings");
    for arg, val in args.__dict__.iteritems():
        print arg, " = ", val;
    print "<<<<<<<<<<<<<<<<<<<<<<<<<<<<"
    
    time.sleep(5)
    
    genome = gt.createGenomeObject(args.input, args.restrictionEnzyme, args.readChrms)
    gt.saveGenomeObject(genome, args.output);